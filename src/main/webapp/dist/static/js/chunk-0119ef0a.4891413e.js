(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0119ef0a"],{"20da":function(t,n,e){},"4c07":function(t,n,e){"use strict";var r=e("20da"),s=e.n(r);s.a},6505:function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"tron-content"},[e("div",{staticClass:"tron-filter-section"},[e("div",[e("el-steps",{attrs:{active:t.currentStep,"align-center":"",type:"mini"}},[e("el-step",{attrs:{title:t.$t("tronPluginConsensusModule")},nativeOn:{click:function(n){return t.stepClickFun(1)}}}),t._v(" "),e("el-step",{attrs:{title:t.$t("tronPluginTransactionModule")},nativeOn:{click:function(n){return t.stepClickFun(2)}}}),t._v(" "),e("el-step",{attrs:{title:t.$t("tronPluginDatabaseModule")},nativeOn:{click:function(n){return t.stepClickFun(3)}}})],1)],1)]),t._v(" "),1==t.currentStep?e("el-form",{ref:"pluginOnsensusDialogForm",staticClass:"pluginSettingForm",attrs:{model:t.pluginOnsensusForm,rules:t.pluginRules,"label-position":"left"}},[e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{on:{click:function(n){t.baseContentShow=!t.baseContentShow}}},[e("i",{class:t.baseContentShow?"el-icon-arrow-down":"el-icon-arrow-right"}),t._v("\n                            "+t._s(t.$t("tronPluginConsensusModule"))+"\n                        ")]),t._v(" "),t.baseContentShow?e("div",[e("el-form-item",{staticClass:"baseFormItem mgt20",attrs:{prop:"consensus"}},[e("el-radio-group",{model:{value:t.pluginOnsensusForm.consensus,callback:function(n){t.$set(t.pluginOnsensusForm,"consensus",n)},expression:"pluginOnsensusForm.consensus"}},[e("el-radio",{attrs:{label:"dpos"}},[t._v("DPOS")]),t._v(" "),e("el-radio",{attrs:{label:"pbft"}},[t._v("PBFT")]),t._v(" "),e("br"),t._v(" "),e("el-radio",{staticStyle:{margin:"15px 0"},attrs:{label:3}},[t._v(t._s(t.$t("tronPluginCustomConsensusModule"))+"：")])],1),t._v(" "),e("el-input",{attrs:{maxlength:50,placeholder:t.$t("tronSettingPlaceholder")},model:{value:t.pluginOnsensusForm.consensusContent,callback:function(n){t.$set(t.pluginOnsensusForm,"consensusContent",n)},expression:"pluginOnsensusForm.consensusContent"}})],1)],1):t._e()])],1)],1),t._v(" "),e("el-form-item",{staticClass:"textRight",attrs:{"label-width":"0"}},[e("router-link",{attrs:{to:{path:"/setting/list"}}},[e("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.$t("tronSettingPreviousStep")))])],1),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.saveData("pluginOnsensusDialogForm")}}},[t._v(t._s(t.$t("tronSettingNextStep")))])],1)],1):t._e(),t._v(" "),2==t.currentStep?e("el-form",{ref:"transcationDialogForm",staticClass:"transcationDialogForm",attrs:{model:t.pluginTransactionForm,rules:t.transcationRules,"label-position":"left"}},[e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{on:{click:function(n){t.transcationContentShow=!t.transcationContentShow}}},[e("i",{class:t.transcationContentShow?"el-icon-arrow-down":"el-icon-arrow-right"}),t._v("\n                            "+t._s(t.$t("tronPluginTransactionModule"))+"\n                        ")]),t._v(" "),t.transcationContentShow?e("div",[e("el-form-item",{staticClass:"baseFormItem mgt20",attrs:{prop:"transaction"}},[e("el-checkbox-group",{model:{value:t.pluginTransactionForm.transaction,callback:function(n){t.$set(t.pluginTransactionForm,"transaction",n)},expression:"pluginTransactionForm.transaction"}},[t._l(t.transactionCheckNodeAry,(function(n,r){return e("el-checkbox",{key:r,attrs:{label:n.value}},[t._v(t._s(n.label))])})),t._v(" "),e("br"),t._v(" "),e("el-checkbox",{staticStyle:{margin:"15px 0"},attrs:{label:9}},[t._v(t._s(t.$t("tronPluginCustomTradingModule")))]),t._v(" "),e("el-input",{attrs:{maxlength:50,placeholder:t.$t("tronSettingPlaceholder")},model:{value:t.pluginTransactionForm.transactionContent,callback:function(n){t.$set(t.pluginTransactionForm,"transactionContent",n)},expression:"pluginTransactionForm.transactionContent"}})],2)],1)],1):t._e()])],1)],1),t._v(" "),e("el-form-item",{staticClass:"textRight",attrs:{"label-width":"0"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.previousStepFun()}}},[t._v(t._s(t.$t("tronSettingPreviousStep")))]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.saveTranstionData("transcationDialogForm")}}},[t._v(t._s(t.$t("tronSettingNextStep")))])],1)],1):t._e(),t._v(" "),3==t.currentStep?e("el-form",{ref:"dbFormDialogForm",staticClass:"dbSettingForm",attrs:{model:t.plugindbForm,rules:t.plugindbRules,"label-width":"200px","label-position":"left"}},[3==t.currentStep?e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{on:{click:function(n){t.dbsettingContentShow=!t.dbsettingContentShow}}},[e("i",{class:t.dbsettingContentShow?"el-icon-arrow-down":"el-icon-arrow-right"}),t._v("\n                            "+t._s(t.$t("tronPluginTransactionModule"))+"\n                        ")]),t._v(" "),t.dbsettingContentShow?e("div",[e("el-form-item",{staticClass:"baseFormItem mgt20",attrs:{label:"dbsetting",prop:"dbsetting"}},[e("el-radio-group",{model:{value:t.plugindbForm.dbsetting,callback:function(n){t.$set(t.plugindbForm,"dbsetting",n)},expression:"plugindbForm.dbsetting"}},[e("el-radio",{attrs:{label:"leveldb"}},[t._v("leveldb")]),t._v(" "),e("el-radio",{attrs:{label:"rockdb"}},[t._v("rockdb")]),t._v(" "),e("br"),t._v(" "),e("el-radio",{staticStyle:{margin:"15px 0"},attrs:{label:3}},[t._v(t._s(t.$t("tronPluginCustomDatabaseModule")))])],1),t._v(" "),e("el-input",{attrs:{maxlength:50,placeholder:t.$t("tronSettingPlaceholder")},model:{value:t.plugindbForm.dbsettingContent,callback:function(n){t.$set(t.plugindbForm,"dbsettingContent",n)},expression:"plugindbForm.dbsettingContent"}})],1)],1):t._e()])],1)],1):t._e(),t._v(" "),e("el-form-item",{staticClass:"textRight",attrs:{"label-width":"0"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.previousStepFun()}}},[t._v(t._s(t.$t("tronSettingPreviousStep")))]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.saveDBData("dbFormDialogForm")}}},[t._v(t._s(t.$t("tronSettingNextStep")))])],1)],1):t._e()],1)])},s=[],a=(e("ac6a"),e("c5f6"),e("75fc")),o=e("b775");function i(){return Object(o["a"])({url:"/pluginConfig",method:"get"})}function l(t){return Object(o["a"])({url:"/dbEngine",method:"post",params:t})}function u(t){return Object(o["a"])({url:"/transaction",headers:{"Content-Type":"application/json"},transformRequest:[function(t){return t=JSON.stringify(t),t}],method:"post",data:t})}function c(t){return Object(o["a"])({url:"/consensus",method:"post",params:t})}var p={name:"pluginlist",data:function(){return{currentStep:1,baseContentShow:!0,transcationContentShow:!0,dbsettingContentShow:!0,pluginOnsensusForm:{consensus:"dpos",consensusContent:""},pluginTransactionForm:{transaction:[],transactionContent:""},transactionCheckNodeAry:[{label:"AccountPermissionUpdate",value:"AccountPermissionUpdateActuator"},{label:"AssetIssue",value:"AssetIssueActuator"},{label:"ClearABIContract",value:"ClearABIContractActuator"},{label:"CreateAccount",value:"CreateAccountActuator"},{label:"ExchangeCreate",value:"ExchangeCreateActuator"},{label:"ExchangeInject",value:"ExchangeInjectActuator"},{label:"ExchangeTransaction",value:"ExchangeTransactionActuator"},{label:"ExchangeWithdraw",value:"ExchangeWithdrawActuator"},{label:"FreezeBalance",value:"FreezeBalanceActuator"},{label:"ParticipateAssetIssue",value:"ParticipateAssetIssueActuator"},{label:"ProposalApprove",value:"ProposalApproveActuator"},{label:"ProposalCreate",value:"ProposalCreateActuator"},{label:"ProposalDelete",value:"ProposalDeleteActuator"},{label:"SetAccountId",value:"SetAccountIdActuator"},{label:"ShieldedTransfer",value:"ShieldedTransferActuator"},{label:"Transfer",value:"TransferActuator"},{label:"TransferAsset",value:"TransferAssetActuator"},{label:"UnfreezeAsset",value:"UnfreezeAssetActuator"},{label:"UnfreezeBalance",value:"UnfreezeBalanceActuator"},{label:"UpdateAccount",value:"UpdateAccountActuator"},{label:"UpdateAsset",value:"UpdateAssetActuator"},{label:"UpdateBrokerage",value:"UpdateBrokerageActuator"},{label:"UpdateEnergyLimit",value:"UpdateEnergyLimitContractActuator"},{label:"UpdateSettingContract",value:"UpdateSettingContractActuator"},{label:"VoteWitness",value:"VoteWitnessActuator"},{label:"WithdrawBalance",value:"WithdrawBalanceActuator"},{label:"WitnessCreate",value:"WitnessCreateActuator"},{label:"WitnessUpdate",value:"WitnessUpdateActuator"}],plugindbForm:{dbsetting:"leveldb",dbsettingContent:""},pluginRules:{consensus:[{required:!0,message:this.$t("tronSettingPlaceholder"),trigger:"blur"}]},transcationRules:{transaction:[{required:!0,message:this.$t("tronSettingPlaceholder"),trigger:"blur"}]},plugindbRules:{dbsetting:[{required:!0,message:this.$t("tronSettingPlaceholder"),trigger:"blur"}]}}},created:function(){this.pluginConfigFun(),this.getCurrentStepFun()},methods:{stepClickFun:function(t){this.currentStep=t,this.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:t}),this.pluginConfigFun()},pluginConfigFun:function(){var t=this;i().then((function(t){return t.data})).then((function(n){"dpos"!=n.consensus&&"pbft"!=n.consensus?t.pluginOnsensusForm={consensus:3,consensusContent:n.consensus}:t.pluginOnsensusForm={consensus:n.consensus,consensusContent:""},""!=n.customTransaction?(t.pluginTransactionForm.transactionContent=n.customTransaction,t.pluginTransactionForm.transaction=[].concat(Object(a["a"])(n.transaction),[9])):t.pluginTransactionForm.transaction=n.transaction,"leveldb"!=n.dbEngine&&"rockdb"!=n.dbEngine?t.plugindbForm={dbsetting:3,dbsettingContent:n.dbEngine}:t.plugindbForm={dbsetting:n.dbEngine,dbsettingContent:""}})).catch((function(t){console.log(t)}))},getCurrentStepFun:function(){var t=sessionStorage.getItem("pluginstep")||1;0!=this.currentStep&&(t=t||this.currentStep),this.currentStep=Number(t),this.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:this.currentStep})},previousStepFun:function(t){this.currentStep=this.currentStep-1,this.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:this.currentStep}),this.pluginConfigFun()},saveData:function(t){var n=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log(n.pluginOnsensusForm),3==n.pluginOnsensusForm.consensus&&(n.pluginOnsensusForm.consensus=n.pluginOnsensusForm.consensusContent),c({consensus:n.pluginOnsensusForm.consensus}).then((function(t){n.$message.success(n.$t("tronPluginConsensusSaveSuccess")),n.currentStep=n.currentStep+1,n.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:n.currentStep}),n.pluginConfigFun()})).catch((function(t){console.log(t)}))}))},saveTranstionData:function(t){var n=this;this.$refs[t].validate((function(t){t&&(""!=n.pluginTransactionForm.transactionContent&&n.pluginTransactionForm.transaction.forEach((function(t,e){9===t&&n.pluginTransactionForm.transaction.splice(e,1)})),console.log(n.pluginTransactionForm),u({transaction:n.pluginTransactionForm.transaction,customTransaction:n.pluginTransactionForm.transactionContent}).then((function(t){n.$message.success(n.$t("tronPluginInputSaveSuccess")),n.currentStep=n.currentStep+1,n.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:n.currentStep}),n.pluginConfigFun()})).catch((function(t){console.log(t)})))}))},saveDBData:function(t){var n=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;3==n.plugindbForm.dbsetting&&(n.plugindbForm.dbsetting=n.plugindbForm.dbsettingContent),l({dbEngine:n.plugindbForm.dbsetting}).then((function(t){n.$message.success(n.$t("tronPluginInputSaveSuccess")),n.$router.push({path:"/node/list",query:{deploy:1}})})).catch((function(t){console.log(t)}))}))}}},g=p,d=(e("4c07"),e("2877")),b=Object(d["a"])(g,r,s,!1,null,"10b3ff5f",null);n["default"]=b.exports},aa77:function(t,n,e){var r=e("5ca1"),s=e("be13"),a=e("79e5"),o=e("fdef"),i="["+o+"]",l="​",u=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),p=function(t,n,e){var s={},i=a((function(){return!!o[t]()||l[t]()!=l})),u=s[t]=i?n(g):o[t];e&&(s[e]=u),r(r.P+r.F*i,"String",s)},g=p.trim=function(t,n){return t=String(s(t)),1&n&&(t=t.replace(u,"")),2&n&&(t=t.replace(c,"")),t};t.exports=p},c5f6:function(t,n,e){"use strict";var r=e("7726"),s=e("69a8"),a=e("2d95"),o=e("5dbc"),i=e("6a99"),l=e("79e5"),u=e("9093").f,c=e("11e9").f,p=e("86cc").f,g=e("aa77").trim,d="Number",b=r[d],f=b,m=b.prototype,v=a(e("2aeb")(m))==d,h="trim"in String.prototype,C=function(t){var n=i(t,!1);if("string"==typeof n&&n.length>2){n=h?n.trim():g(n,3);var e,r,s,a=n.charCodeAt(0);if(43===a||45===a){if(e=n.charCodeAt(2),88===e||120===e)return NaN}else if(48===a){switch(n.charCodeAt(1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+n}for(var o,l=n.slice(2),u=0,c=l.length;u<c;u++)if(o=l.charCodeAt(u),o<48||o>s)return NaN;return parseInt(l,r)}}return+n};if(!b(" 0o1")||!b("0b1")||b("+0x1")){b=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof b&&(v?l((function(){m.valueOf.call(e)})):a(e)!=d)?o(new f(C(n)),e,b):C(n)};for(var S,F=e("9e1e")?u(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;F.length>_;_++)s(f,S=F[_])&&!s(b,S)&&p(b,S,c(f,S));b.prototype=m,m.constructor=b,e("2aba")(r,d,b)}},fdef:function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);